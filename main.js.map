{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project/./src/utils/constants.js","webpack://mesto-project/./src/components/modal.js","webpack://mesto-project/./src/components/validation.js","webpack://mesto-project/./src/components/api.js","webpack://mesto-project/./src/components/card.js","webpack://mesto-project/./src/utils/utils.js","webpack://mesto-project/./src/pages/index.js"],"sourcesContent":["\r\n/** находим в html секцию с разметкой для карточек */\r\nconst cardList = document.querySelector(\".elements\");\r\nconst cardTemplate = document\r\n  .querySelector(\"#element-template\")\r\n  .content.querySelector(\".element\");\r\n/** Находим форму для добавления картинок в DOM */\r\nconst formElementImg = document.querySelector(\".form_img\");\r\nconst imgInputName = formElementImg.querySelector(\"#img-name\");\r\nconst imgInputLink = formElementImg.querySelector(\"#img-link\");\r\nconst imgButtonSubmit = formElementImg.querySelector(\".form__button_img\");\r\n\r\nconst avatarImage = document.querySelector(\".profile__avatar\");\r\nconst avatarOpenButton = document.querySelector(\".profile__avatar-button\");\r\nconst avatarButtonSubmit = document.querySelector(\".form__button_avatar\");\r\nconst avatarForm = document.querySelector(\".form_avatar\");\r\nconst popupAvatar = document.querySelector(\".popup_avatar\");\r\nconst avatarInput = document.querySelector(\".form__input_avatar\");\r\n\r\n\r\n/** ПОПАПЫ */\r\n/** Находим попап редактирования профиля в DOM */\r\nconst popupProfile = document.querySelector(\".popup\");\r\n/** Находим кнопку, которая должна закрывать попап, отвечающий за редактирования профиля */\r\nconst popupButtonClose = document.querySelector(\".close-item\");\r\n/** Находим попап для добавления изображений */\r\nconst popupAddCard = document.querySelector(\".popup_img\");\r\n/** Находим попап для просмотра фото */\r\nconst popupPicture = document.querySelector(\".popup_pic\");\r\n/** Находим кнопку которая открывает попап редактирования профиля */\r\nconst popupButton = document.querySelector(\".profile__button-rectangle\");\r\n/** Находим кнопку, которая должна открывать попап добавления изображения */\r\nconst addImg = document.querySelector(\".profile__button-pluss\");\r\nconst submitButtonProfile = document.querySelector(\".form__button\");\r\n/** попап просмотра фото */\r\nconst picPopupCont = popupPicture.querySelector(\".popup__container_picture\");\r\nconst picPopupEl = picPopupCont.querySelector(\".popup__picture\");\r\nconst picText = picPopupCont.querySelector(\".popup__text\");\r\n/** кнопка закрытия попап, который добавляет изображения */\r\nconst imgPopupClose = document.querySelector(\".close-item_img\");\r\n/** кнопка закрытия попап, который просматривает изображения */\r\nconst picPopupClose = document.querySelector(\".close-item_pic\");\r\n/** находим форму редактирования профиля в DOM */\r\nconst formEditProfile = document.querySelector(\".form\");\r\nconst nameInput = formEditProfile.querySelector(\"#first-name\");\r\nconst jobInput = formEditProfile.querySelector(\"#job\");\r\n/** Находим значения имя и занятия в html коде */\r\nconst profileName = document.querySelector(\".profile__firstname\");\r\nconst profileJob = document.querySelector(\".profile__job\");\r\n\r\nconst validationConfig = {\r\n  formSelector: \".form\",\r\n  inputSelector: \".form__input\",\r\n  submitButtonSelector: \".form__button\",\r\n  inactiveButtonClass: \"form__button_invalid\",\r\n  inputErrorClass: \"form__input_invalid\",\r\n  errorClass: \"error\",\r\n};\r\n\r\nconst setUserInfo = ({userName, userDescription, userAvatar}) => {\r\n  if (userName) profileName.textContent = userName;\r\n  if (userDescription) profileJob.textContent = userDescription;\r\n  if (userAvatar) avatarImage.src = userAvatar;\r\n};\r\n\r\nexport {\r\n  avatarInput,\r\n  setUserInfo,\r\n  popupAvatar,\r\n  avatarOpenButton,\r\n  avatarForm,\r\n  avatarButtonSubmit,\r\n  avatarImage,\r\n  submitButtonProfile,\r\n  validationConfig,\r\n  cardList,\r\n  cardTemplate,\r\n  formElementImg,\r\n  imgInputName,\r\n  imgInputLink,\r\n  imgButtonSubmit,\r\n  profileJob,\r\n  profileName,\r\n  jobInput,\r\n  nameInput,\r\n  formEditProfile,\r\n  picPopupClose,\r\n  imgPopupClose,\r\n  picText,\r\n  picPopupEl,\r\n  picPopupCont,\r\n  addImg,\r\n  popupButton,\r\n  popupPicture,\r\n  popupAddCard,\r\n  popupButtonClose,\r\n  popupProfile,\r\n};\r\n","/** добавляем функцию, которая отвечает за открытие попап, отвечающего за редактирование профиля */\r\nimport {\r\n  nameInput,\r\n  jobInput,\r\n  profileName,\r\n  profileJob,\r\n} from \"../utils/constants\";\r\n\r\n/**закрытие по esc и overlay */\r\nconst closeByEscape = (evt) => {\r\n  if (evt.key === \"Escape\") {\r\n    const activePopup = document.querySelector(\".popup_opened\");\r\n    closePopup(activePopup);\r\n  }\r\n};\r\n\r\n/**закрытие по overlay */\r\nconst overlay = (evt) => {\r\n  const activePopup = document.querySelector(\".popup_opened\");\r\n  if (\r\n    evt.target.classList.contains(\"popup\") ||\r\n    evt.target.classList.contains(\"close-item\")\r\n  ) {\r\n    closePopup(activePopup);\r\n  }\r\n};\r\n\r\nconst openPopup = (popup) => {\r\n  popup.classList.add(\"popup_opened\");\r\n  document.addEventListener(\"keydown\", closeByEscape);\r\n  popup.addEventListener(\"mousedown\", overlay);\r\n};\r\n\r\n/** функция, которая выводит в попап, указанные имя и деятельность */\r\nfunction addInfofromPopup() {\r\n  nameInput.value = profileName.textContent;\r\n  jobInput.value = profileJob.textContent;\r\n}\r\n\r\n//добавляем функцию для закрытия попапа\r\nconst closePopup = (popup) => {\r\n  popup.classList.remove(\"popup_opened\");\r\n  document.removeEventListener(\"keydown\", closeByEscape);\r\n  popup.removeEventListener(\"mousedown\", overlay);\r\n};\r\n\r\nconst closeByCross = () => {\r\n  const allCrosses = document.querySelectorAll('.close-item');\r\n  allCrosses.forEach((cross) => {\r\n    cross.addEventListener('click', closePopup)\r\n  })\r\n}\r\n\r\nexport { openPopup, addInfofromPopup, closePopup, closeByCross };\r\n","/**  Функция, которая добавляет класс с ошибкой */\r\nconst showError = (errorElement, inputElement, config) => {\r\n  errorElement.textContent = inputElement.validationMessage;\r\n  inputElement.classList.add(config.inputErrorClass);\r\n};\r\n/** Функция, которая удаляет класс с ошибкой */\r\nconst hideError = (errorElement, inputElement, config) => {\r\n  errorElement.textContent = \"\";\r\n  inputElement.classList.remove(config.inputErrorClass);\r\n};\r\n/** Функция, которая проверяет валидность поля */\r\nconst checkInputValidity = (formElement, inputElement, config) => {\r\n  const isInputNotValid = !inputElement.validity.valid;\r\n  const errorElement = formElement.querySelector(`#${inputElement.id}-error`);\r\n\r\n  if (isInputNotValid) {\r\n    showError(errorElement, inputElement, config);\r\n  } else {\r\n    hideError(errorElement, inputElement, config);\r\n  }\r\n};\r\n\r\nconst toggleButtonState = (button, isActive = false, config) => {\r\n  if (isActive) {\r\n    button.classList.remove(config.inactiveButtonClass);\r\n    button.disabled = false;\r\n  } else {\r\n    button.classList.add(config.inactiveButtonClass);\r\n    button.disabled = \"disabled\";\r\n  }\r\n};\r\n\r\nexport const setEventListers = (formElement, config) => {\r\n  const inputsList = formElement.querySelectorAll(config.inputSelector);\r\n  const submitButton = formElement.querySelector(config.submitButtonSelector);\r\n  toggleButtonState(submitButton, formElement.checkValidity(), config);\r\n\r\n  Array.from(inputsList).forEach((inputElement) => {\r\n    inputElement.addEventListener(\"input\", () => {\r\n      const isFormValid = formElement.checkValidity();\r\n      checkInputValidity(formElement, inputElement, config);\r\n      toggleButtonState(submitButton, isFormValid, config);\r\n    });\r\n  });\r\n\r\n  formElement.addEventListener(\"submit\", (evt) => {\r\n    evt.preventDefault();\r\n  });\r\n};\r\n\r\nexport { toggleButtonState };\r\n","const config = {\r\n  url: \"https://mesto.nomoreparties.co/v1/plus-cohort-13\",\r\n  headers: {\r\n    authorization: \"d1d14902-c78a-4d00-aa9d-9b64f78ed110\",\r\n    \"Content-type\": \"application/json\"\r\n  },\r\n};\r\n/** функция по проверке промисов */\r\nconst onResponse = (res) => {\r\n  return res.ok ? res.json() : Promise.reject(res);\r\n};\r\n/** 3.загрузка инфо о пользователе с сервера */\r\nfunction getProfileInfo() {\r\n  return fetch(`${config.url}/users/me`, {\r\n    method: \"GET\",\r\n    headers: config.headers\r\n  }).then((res) => onResponse(res));;\r\n}\r\n/** 4.загрузка карточек с сервера */\r\nfunction getAllCards() {\r\n  return fetch(`${config.url}/cards`, {\r\n    method: \"GET\",\r\n    headers: config.headers\r\n  }).then((res) => onResponse(res));;\r\n}\r\n\r\nfunction getAllInfo() {\r\n  return Promise.all([getAllCards(), getProfileInfo()]);\r\n}\r\n\r\n/** 5.редактирование рофиля */\r\nfunction editProfileForm(data) {\r\n    return fetch(`${config.url}/users/me`, {\r\n      method: \"PATCH\",\r\n      headers: config.headers,\r\n      body: JSON.stringify(data),\r\n    }).then((res) => onResponse(res));;\r\n  }\r\n\r\n/** 6.добавление новой карточки */\r\nfunction addCard(data) {\r\n  return fetch(`${config.url}/cards`, {\r\n    method: \"POST\",\r\n    headers: config.headers,\r\n    body: JSON.stringify(data),\r\n  }).then((res) => onResponse(res));;\r\n}\r\n\r\n/** 8.удаление карточки */\r\nfunction removeCard(cardId) {\r\n  return fetch(`${config.url}/cards/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers\r\n  }).then((res) => onResponse(res));;\r\n}\r\n/** 9.постановка или удаление лайка */\r\nfunction changeLikeStatus(dataId, isLike) {\r\n    return fetch(`${config.url}/cards/likes/${dataId}`, {\r\n      method: isLike ? \"DELETE\" : \"PUT\",\r\n      headers: config.headers\r\n    }).then((res) => onResponse(res));;\r\n  }\r\n/** 10.обновление аватара пользователя */\r\nfunction editProfileAvatar(data) {\r\n  return fetch(`${config.url}/users/me/avatar`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify(data)\r\n  }).then((res) => onResponse(res));;\r\n}\r\n\r\nexport {\r\n  changeLikeStatus,\r\n  editProfileForm,\r\n  removeCard,\r\n  addCard,\r\n  getAllInfo,\r\n  getAllCards,\r\n  getProfileInfo,\r\n  editProfileAvatar\r\n};\r\n","import { openPopup } from \"./modal\";\r\nimport {\r\n  picPopupEl,\r\n  picText,\r\n  popupPicture,\r\n  cardTemplate,\r\n  cardList,\r\n  avatarImage\r\n} from \"../utils/constants.js\";\r\nimport { removeCard, changeLikeStatus } from \"./api\";\r\n\r\nexport { handleChangeLikeStatus, updateLikesState, handleDeleteCard, deleteImg, createAvatar };\r\n\r\n/** открытие попапа для просмотра фотографий по клику на карточку */\r\nexport const clickImage = function (data) {\r\n  picPopupEl.src = data.link;\r\n  picPopupEl.alt = data.name;\r\n  picText.textContent = data.name;\r\n  openPopup(popupPicture);\r\n};\r\n/** функция, которая определяет, поставлен лайк или нет */\r\nexport const isLiked = (likesArray, userId) => {\r\n  return Boolean(\r\n    likesArray.find((likeObj) => {\r\n      return likeObj._id === userId;\r\n    })\r\n  );\r\n};\r\n/**обновление кол-ва лайков */\r\nconst updateLikesState = (cardElement, likesArray, userId) => {\r\n  const likeButton = cardElement.querySelector(\".element__button\");\r\n  const likeAmount = cardElement.querySelector(\".element__like-amount\");\r\n\r\n  likeAmount.textContent = likesArray.length;\r\n\r\n  if(isLiked(likesArray, userId)) {\r\n    likeButton.classList.add(\"element__button_active\");\r\n  } else {\r\n    likeButton.classList.remove(\"element__button_active\");\r\n  }\r\n}\r\n/**функция которая отслеживает постановку лайка */\r\nconst handleChangeLikeStatus = (cardId, isLiked, cardElement, userId) => {\r\n  changeLikeStatus(cardId, isLiked)\r\n    .then((dataFromServer) => {\r\n      updateLikesState(cardElement, dataFromServer.likes, userId)\r\n    })\r\n    .catch((err) => {\r\n      console.log(`Ошибка работы лайк ${err.status}`)\r\n    })\r\n}\r\n/** функция удаления карточек */ \r\nconst deleteImg = function (element) { \r\n  element.remove(); \r\n};\r\n/**функция удаления карточки */\r\nconst handleDeleteCard = (cardElement, cardId) => {\r\n  removeCard(cardId)\r\n  .then(() => {\r\n    deleteImg(cardElement)\r\n  })\r\n  .catch((err) => {\r\n    console.log(`Ошибка при удалении ${err.status}`)\r\n  })\r\n};\r\n/**функция, которая обновляет картинку аватара */\r\nconst createAvatar = function (dataAvatar) {\r\n  avatarImage.src = dataAvatar.link;\r\n  avatarImage.alt = dataAvatar.name;\r\n}\r\n\r\nexport const createCard = function (data, userId, handleChangeLikeStatus, handleDeleteCard) {\r\n  const cardElement = cardTemplate.cloneNode(true);\r\n  const cardImage = cardElement.querySelector(\".element__picture\");\r\n  const cardText = cardElement.querySelector(\".element__text\");\r\n  const likeButton = cardElement.querySelector(\".element__button\");\r\n  const rubbishButton = cardElement.querySelector(\".element__button-rubbish\");\r\n \r\n  cardImage.src = data.link;\r\n  cardImage.alt = data.name;\r\n  cardText.textContent = data.name;\r\n\r\n  updateLikesState(cardElement, data.likes, userId )\r\n\r\n  if (data.owner._id !== userId) {\r\n    rubbishButton.remove();\r\n  }\r\n\r\n  cardImage.addEventListener(\"click\", () => clickImage(data));\r\n\r\n  likeButton.addEventListener(\"click\", () => {\r\n    handleChangeLikeStatus(data._id, likeButton.classList.contains(\"element__button_active\"), cardElement, userId);\r\n  });\r\n\r\n  /** Добавляем работу rubbish*/\r\n  rubbishButton.addEventListener(\"click\", function () {\r\n    handleDeleteCard(cardElement, data._id)\r\n  });\r\n\r\n  return cardElement;\r\n}\r\n","/**функция измения статуса кнопки Сохранить на Сохранение*/\r\nconst loadSubmitButton = (popup, isLoading) => {\r\n  const allSubmitButtons = popup.querySelectorAll(\".form__button\");\r\n  allSubmitButtons.forEach((button) => {\r\n    if (isLoading) {\r\n      button.value = \"Сохранение...\";\r\n    } else {\r\n      button.value = \"Сохранить\";\r\n    }\r\n  });\r\n};\r\n\r\nexport { loadSubmitButton };\r\n","import \"./index.css\";\r\nimport {\r\n  initialCards,\r\n  cardList,\r\n  formElementImg,\r\n  imgInputName,\r\n  imgInputLink,\r\n  profileJob,\r\n  profileName,\r\n  jobInput,\r\n  nameInput,\r\n  formEditProfile,\r\n  picPopupClose,\r\n  imgPopupClose,\r\n  imgButtonSubmit,\r\n  picPopupEl,\r\n  addImg,\r\n  popupButton,\r\n  popupPicture,\r\n  popupAddCard,\r\n  popupButtonClose,\r\n  popupProfile,\r\n  validationConfig,\r\n  avatarForm,\r\n  avatarInput,\r\n  avatarButtonSubmit,\r\n  avatarImage,\r\n  popupAvatar,\r\n  setUserInfo,\r\n  submitButtonProfile,\r\n  avatarOpenButton,\r\n} from \"../utils/constants.js\";\r\n\r\nimport { addInfofromPopup, openPopup, closePopup, closeByCross } from \"../components/modal\";\r\nimport { toggleButtonState } from \"../components/validation.js\";\r\nimport { setEventListers } from \"../components/validation\";\r\nimport {\r\n  createAvatar,\r\n  createCard,\r\n  handleChangeLikeStatus,\r\n  handleDeleteCard,\r\n} from \"../components/card.js\";\r\nimport {\r\n  getAllInfo,\r\n  addCard,\r\n  changeLikeStatus,\r\n  editProfileAvatar,\r\n  getProfileInfo,\r\n  editProfileForm,\r\n  removeCard\r\n} from \"../components/api.js\";\r\n\r\nimport { loadSubmitButton } from \"../utils/utils.js\"\r\n\r\nlet userId = null;\r\n\r\n/** функция, которая создает новую карточку */\r\nfunction renderCard(data, container, userId) {\r\n  const card = createCard(\r\n    data,\r\n    userId,\r\n    handleChangeLikeStatus,\r\n    handleDeleteCard\r\n  );\r\n  container.prepend(card);\r\n};\r\n\r\n/**получаем информацию о пользователи и о загруженных карточках */\r\ngetAllInfo().then(([cards, user]) => {\r\n  setUserInfo({\r\n    userName: user.name,\r\n    userDescription: user.about,\r\n    userAvatar: user.avatar\r\n  })\r\n  userId = user._id;\r\n  /**получаем от сервера карточки и вызываем на них метод рендера каждой */\r\n  cards.reverse().forEach((card) => {\r\n    renderCard(card, cardList, userId);\r\n  });\r\n});\r\n/** открытие попапа аватара */\r\navatarOpenButton.addEventListener(\"click\", () => {\r\n  openPopup(popupAvatar);\r\n});\r\n\r\n/** открытие попапа редактирования */\r\npopupButton.addEventListener(\"click\", function () {\r\n  openPopup(popupProfile);\r\n  addInfofromPopup(popupProfile);\r\n});\r\n/** закрытие попап редактирования профиля */\r\npopupButtonClose.addEventListener(\"click\", function () {\r\n  closePopup(popupProfile);\r\n});\r\n\r\n/** открытие попапа для загрузки новых карточек */\r\naddImg.addEventListener(\"click\", function () {\r\n  openPopup(popupAddCard);\r\n});\r\n/** закрытие попап загрузки новых карточек */\r\nimgPopupClose.addEventListener(\"click\", function () {\r\n  closePopup(popupAddCard);\r\n});\r\n\r\n/** добавляем открытие попап просмотра карточек */\r\nformEditProfile.addEventListener(\"submit\", submitEditProfileForm);\r\npicPopupEl.addEventListener(\"click\", function () {\r\n  openPopup(picPopupEl);\r\n});\r\n\r\n/** Обработчик «отправки» формы редактироания профиля*/\r\nexport function submitEditProfileForm(evt) {\r\n  evt.preventDefault();\r\n  const newDataUser = {\r\n    name: nameInput.value,\r\n    about: jobInput.value,\r\n  }\r\n  loadSubmitButton(popupProfile, true);\r\n  editProfileForm(newDataUser)\r\n    .then((data) => {\r\n      setUserInfo({\r\n        userName: data.name,\r\n        userDescription: data.about,\r\n      })\r\n      closePopup(popupProfile);  \r\n    })\r\n    .catch((err) => {\r\n      console.log(`Ошибка загрузки данных ${err}`)\r\n    })\r\n    .finally(() => {\r\n      loadSubmitButton(popupProfile, false);\r\n    })\r\n    toggleButtonState(submitButtonProfile, false, validationConfig);\r\n}\r\nsubmitButtonProfile.addEventListener(\"submit\", submitEditProfileForm);\r\n\r\n/** Обработчик «отправки» формы добавления карточек */\r\nexport function formSubmitHandlerImg(evt) {\r\n  evt.preventDefault();\r\n  const newCard = {\r\n    name: imgInputName.value,\r\n    link: imgInputLink.value,\r\n  };\r\n  loadSubmitButton(popupAddCard, true);\r\n  addCard(newCard)\r\n    .then((data) => {\r\n      renderCard(data, cardList, userId);\r\n      closePopup(popupAddCard);\r\n      formElementImg.reset();\r\n    })\r\n    .catch((err) => {\r\n      console.log(`Ошибка загрузки данных ${err.status}`)\r\n    })\r\n    .finally(() => {\r\n      loadSubmitButton(popupAddCard, false);\r\n    })  \r\n  toggleButtonState(imgButtonSubmit, false, validationConfig);\r\n}\r\nformElementImg.addEventListener(\"submit\", formSubmitHandlerImg);\r\n\r\n/** Обработчик «отправки» формы для аватара */\r\nexport function formSubmitHandlerAvatar(evt) {\r\n  evt.preventDefault();\r\n  const newAvatar = {\r\n    avatar: avatarInput.value,\r\n  }\r\n  loadSubmitButton(popupAvatar, true);\r\n  editProfileAvatar(newAvatar)\r\n    .then((dataAvatar) => {\r\n      setUserInfo({\r\n        userAvatar: dataAvatar.avatar\r\n      })\r\n      closePopup(popupAvatar);\r\n      avatarForm.reset();\r\n    })\r\n    .catch((err) => {\r\n      console.log(`Ошибка загрузки данных ${err.status}`)\r\n    })\r\n    .finally(() => {\r\n      loadSubmitButton(popupAvatar, false);\r\n    })  \r\n\r\n  toggleButtonState(avatarButtonSubmit, false, validationConfig);\r\n};\r\navatarButtonSubmit.addEventListener(\"click\", formSubmitHandlerAvatar);\r\n\r\n/**проверка инпутов форм на валидность */\r\nconst enableValidation = (config) => {\r\n  const forms = document.querySelectorAll(config.formSelector);\r\n  Array.from(forms).forEach((formElement) => {\r\n    setEventListers(formElement, config);\r\n  })\r\n}\r\nenableValidation(validationConfig);\r\n"],"names":["cardList","document","querySelector","cardTemplate","content","formElementImg","imgInputName","imgInputLink","imgButtonSubmit","avatarImage","avatarOpenButton","avatarButtonSubmit","avatarForm","popupAvatar","avatarInput","popupProfile","popupButtonClose","popupAddCard","popupPicture","popupButton","addImg","submitButtonProfile","picPopupCont","picPopupEl","picText","imgPopupClose","formEditProfile","nameInput","jobInput","profileName","profileJob","validationConfig","formSelector","inputSelector","submitButtonSelector","inactiveButtonClass","inputErrorClass","errorClass","setUserInfo","userName","userDescription","userAvatar","textContent","src","closeByEscape","evt","key","activePopup","closePopup","overlay","target","classList","contains","openPopup","popup","add","addEventListener","remove","removeEventListener","toggleButtonState","button","isActive","config","disabled","url","headers","authorization","onResponse","res","ok","json","Promise","reject","updateLikesState","cardElement","likesArray","userId","likeButton","length","Boolean","find","likeObj","_id","isLiked","handleChangeLikeStatus","cardId","dataId","isLike","fetch","method","then","dataFromServer","likes","catch","err","console","log","status","handleDeleteCard","removeCard","loadSubmitButton","isLoading","querySelectorAll","forEach","value","renderCard","data","container","card","cloneNode","cardImage","cardText","rubbishButton","link","alt","name","owner","clickImage","createCard","prepend","submitEditProfileForm","preventDefault","newDataUser","about","body","JSON","stringify","finally","all","cards","user","avatar","reverse","newCard","reset","newAvatar","dataAvatar","forms","Array","from","formElement","inputsList","submitButton","checkValidity","inputElement","isFormValid","isInputNotValid","validity","valid","errorElement","id","validationMessage","showError","hideError","checkInputValidity","setEventListers","enableValidation"],"sourceRoot":""}